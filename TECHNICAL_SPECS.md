# Sudoku 1vs1 Technical Specifications

## Architecture Overview

### Frontend Architecture
- **Framework**: Nuxt 3 (Vue 3) with TypeScript
- **State Management**: Nuxt state manager for global state
- **Styling**: Tailwind CSS with custom components
- **Routing**: Vue Router (integrated with Nuxt)

### Backend Architecture
- **Platform**: Pocketbase
- **Authentication**: Pocketbase Auth
- **Database**: Pocketbase Database
- **Realtime**: Pocketbase Realtime for live game updates

## Database Schema

### Collections

#### Users
| Field | Type | Description |
|-------|------|-------------|
| id | string | User ID (auto-generated by Pocketbase) |
| name | string | Display name |
| email | string | User email |
| gamesPlayed | number | Total number of games played |
| gamesWon | number | Total number of games won |
| bestTime | number | Best time to complete a puzzle (seconds) |
| rating | number | ELO-based rating |
| createdAt | datetime | Account creation timestamp |

#### Games
| Field | Type | Description |
|-------|------|-------------|
| id | string | Game ID (auto-generated by Pocketbase) |
| player1 | string | ID of player 1 |
| player2 | string | ID of player 2 |
| status | string | Game status (waiting, in-progress, completed) |
| difficulty | string | Puzzle difficulty (easy, medium, hard) |
| puzzle | object | JSON representation of the initial puzzle |
| winner | string | ID of the winner (null if draw or in-progress) |
| player1Time | number | Time taken by player 1 to complete (seconds) |
| player2Time | number | Time taken by player 2 to complete (seconds) |
| createdAt | datetime | Game creation timestamp |
| updatedAt | datetime | Last update timestamp |

#### GameStates
| Field | Type | Description |
|-------|------|-------------|
| id | string | State ID (auto-generated by Pocketbase) |
| gameId | string | Reference to Games collection |
| playerId | string | ID of the player |
| board | object | JSON representation of the current board state |
| notes | object | JSON representation of player notes |
| errors | number | Number of errors made |
| lastUpdated | datetime | Last update timestamp |

## Component Structure

### Core Components
- **SudokuBoard.vue**: Main game board component
- **SudokuCell.vue**: Individual cell component
- **NumberPad.vue**: Number selection component
- **GameTimer.vue**: Timer component
- **GameControls.vue**: Game control buttons
- **PlayerStats.vue**: Display player information and stats
- **GameLobby.vue**: Lobby for matchmaking
- **LeaderBoard.vue**: Leaderboard display

### Layouts
- **DefaultLayout.vue**: Main layout with navigation
- **GameLayout.vue**: Layout for active games
- **AuthLayout.vue**: Layout for authentication pages

### Pages
- **index.vue**: Home page/dashboard
- **login.vue**: Login page
- **register.vue**: Registration page
- **profile.vue**: User profile
- **lobby.vue**: Game lobby
- **game/[id].vue**: Active game page
- **leaderboard.vue**: Leaderboard page

## Game Logic

### Sudoku Generation
- Implementation of a backtracking algorithm to generate valid Sudoku puzzles
- Difficulty levels determined by the number and position of revealed cells
- Possibility to save pre-generated puzzles in the database for quicker loading

### Game Flow
1. Player enters lobby
2. Player joins waiting game or creates a new one
3. When two players are matched, game initializes
4. Both players see the same puzzle and start solving
5. Real-time updates show opponent's progress
6. First player to correctly complete the puzzle wins
7. Game summary shown with statistics

### Validation Logic
- Client-side validation for immediate feedback
- Row, column, and 3x3 box validation
- Real-time notification of conflicts
- Tracking of errors for scoring purposes

## Real-time Features

### Game Synchronization
- Board state synchronized in real-time
- Opponent's completed cells highlighted
- Progress indicators (percentage complete)
- Timer synchronization

### Chat System (Post-MVP)
- Real-time in-game chat
- Preset messages for quick communication

## Authentication & Authorization

### User Registration
- Email/password registration
- Social login options (Google, GitHub) - optional for MVP
- Email verification

### User Authentication
- JWT-based authentication
- Session management
- Password reset functionality

## Responsive Design

### Breakpoints
- Mobile: < 640px
- Tablet: 640px - 1024px
- Desktop: > 1024px

### Mobile Considerations
- Touch-friendly interface for number input
- Simplified UI for smaller screens
- Game board adjusts to screen size

## Performance Considerations

### Optimization Strategies
- Lazy loading of components
- Efficient state management
- Minimize real-time updates to essential data
- Implement proper caching strategies

### Testing Requirements
- Unit tests for critical game logic
- E2E tests for game flow
- Performance testing for real-time functionality

## Development Environment Setup

### Required Tools
- Node.js (v16+)
- npm or yarn
- Git
- Pocketbase CLI for local development

### Local Development Instructions
1. Clone repository
2. Install dependencies
3. Set up local Pocketbase instance or connect to development instance
4. Configure environment variables
5. Run development server

## API Integration

### Pocketbase API
- Authentication API integration
- Database API for game state management
- Realtime API for live updates
- Storage API for user avatars (optional)

## Deployment Strategy

### Hosting Options
- Vercel/Netlify for frontend
- Pocketbase cloud or self-hosted for backend
- CDN for static assets

### CI/CD Pipeline
- GitHub Actions for automated testing and deployment
- Environment-specific configurations (dev, staging, production)

---

*This document will evolve throughout the development process as requirements are refined and new insights emerge.* 